<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <title>Personal Project Overview</title>
</head>

<body class="bg-gray-100 flex items-center justify-center min-h-screen">
  <div class="container mx-auto px-4">
    <h1 class="text-6xl text-center m-8">Personal Project Overview</h1>
    <div class="grid grid-cols-1 sm:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4">
      <div class="fle flex-col space-y-4" id="projects0"></div>
      <div class="fle flex-col space-y-4" id="projects1"></div>
      <div class="fle flex-col space-y-4" id="projects2"></div>
    </div>
    <script>
      const data_file = "./display.json";
      const video_id_regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/;

      function extractVideoID(url) {
        const match = url.match(video_id_regExp);
        return match && match[7].length == 11 ? match[7] : "";
      }

      function createCard(project) {
        const youtube_id = extractVideoID(project.youtubeUrl);
        
        Object.keys(project).forEach(key => {
          project[key] = project[key].replace(/</g, "&lt;").replace(/>/g, "&gt;");
        }); // clean up html injections

        return `
          ${youtube_id !== "" ? `
            <a href="${project.youtubeUrl}" target="_blank">
              <img src="https://img.youtube.com/vi/${youtube_id}/0.jpg" alt="YouTube Video Thumbnail" class="w-full h-auto rounded-t-lg">
            </a>` : ''}
          <figure class="relative flex flex-col bg-slate-50 rounded-lg p-6 dark:bg-slate-800 dark:highlight-white/5">
            <figcaption class="flex items-center space-x-4">
              <img src="./images/${project.alias.toLowerCase()}.png" alt="" class="flex-none w-14 h-14 rounded-full object-cover" loading="lazy" decoding="async">
              <div class="flex-auto">
                <div class="text-base text-slate-900 font-semibold dark:text-slate-300"><span class="absolute inset-0"></span>${project.alias}</div>
                <div class="mt-0.5 italic">${project.studyBackground ? project.studyBackground : "Unknown"}</div>
              </div>
            </figcaption>
            <blockquote class="mt-6 text-slate-700 dark:text-slate-300">
              <p>${project.initialProjectIdeas ? project.initialProjectIdeas : "..."}</p>
            </blockquote>
            <blockquote class="mt-6 text-slate-700 dark:text-slate-300 italic">
              <p>${project.motivation ? `<code>${project.motivation}</code>` : "Nothing here yet :("}</p>
            </blockquote>
          </figure>
        `;
      }

      window.onload = () => {
        fetch(data_file)
          .then((response) => response.json())
          .then((projects) => {
            projects.forEach((data, index) => {
              const card = document.createElement("div");
              card.className = "bg-white rounded shadow flex flex-col";
              card.innerHTML = createCard(data, index);
              document.getElementById(`projects${index % 3}`).appendChild(card);
            });
          });
      }
    </script>

</body>

</html>