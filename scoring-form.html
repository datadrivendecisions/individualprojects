<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beoordelingsformulier Data Science Tools and Techniques</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        .radio-group {
            display: flex;
            flex-direction: column;
        }
        .radio-group label {
            margin-bottom: 0.5rem;
        }
        .pdf-content {
            padding: 0.1in;
            width: 100%;
            height: 100%;
        }
        textarea {
            overflow: hidden;
            resize: none;
            width: 100%;
        }
    </style>
</head>
<body>
<div class="container mt-5">
    <form id="evaluationForm">
        <div class="pdf-content" id="pdfContent">
            <h2 class="mb-4">Beoordelingsformulier Data Science Tools and Techniques</h2>
            <div class="mb-3 col-2">
                <label for="studentName" class="form-label">Student name</label>
                <input type="text" class="form-control" id="studentName" name="studentName" required>
            </div>
            <div class="mb-3 col-2">
                <label for="assessorName" class="form-label">Assessor name</label>
                <input type="text" class="form-control" id="assessorName" name="assessorName" required>
            </div>
            <div class="mb-3 col-2">
                <label for="reviewDate" class="form-label">Assessment date</label>
                <input type="date" class="form-control" id="reviewDate" name="reviewDate" required>
            </div>
            <div class="mb-3 col-2">
                <label for="finalGrade" class="form-label">Final Grade</label>
                <input type="text" class="form-control" id="finalGrade" name="finalGrade" readonly>
            </div>
            <table class="table table-bordered">
                <thead class="table-light">
                    <tr>
                        <th></th>
                        <th>Criteria</th>
                        <th>Description</th>
                        <th>Rating</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>Value Proposition and Market Validation</td>
                        <td>Clearly defines the value proposition of the MVP for a data product, including its potential market fit. The proposition is supported by market exploration, user needs assessment, and preliminary validation efforts. Emphasizes the importance of solving a real problem or addressing a specific need with the data product.</td>
                        <td>
                            <div class="radio-group">
                                <div>
                                    <input type="radio" id="criteria1-1" name="criteria1" value="1">
                                    <label for="criteria1-1">1</label>
                                </div>
                                <div>
                                    <input type="radio" id="criteria1-2" name="criteria1" value="2">
                                    <label for="criteria1-2">2</label>
                                </div>
                                <div>
                                    <input type="radio" id="criteria1-3" name="criteria1" value="3">
                                    <label for="criteria1-3">3</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr><td colspan="4"><textarea class="form-control" name="comment1" id="comment1" placeholder="Remarks" rows="5"></textarea></td></tr>
                    <tr>
                        <td>2</td>
                        <td>Design and Feasibility</td>
                        <td>Demonstrates the application of appropriate tools and methodologies in the design and development of the MVP. Justifies the choice of technologies and methodologies with a focus on feasibility, cost-effectiveness, and speed. The implementation strategy should reflect an understanding of MVP principles, aiming to quickly test hypotheses and gather user feedback.</td>
                        <td>
                            <div class="radio-group">
                                <div>
                                    <input type="radio" id="criteria2-1" name="criteria2" value="1">
                                    <label for="criteria2-1">1</label>
                                </div>
                                <div>
                                    <input type="radio" id="criteria2-2" name="criteria2" value="2">
                                    <label for="criteria2-2">2</label>
                                </div>
                                <div>
                                    <input type="radio" id="criteria2-3" name="criteria2" value="3">
                                    <label for="criteria2-3">3</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr><td colspan="4"><textarea class="form-control" name="comment2" id="comment2" placeholder="Remarks" rows="5"></textarea></td></tr>
                    <tr>
                        <td>3</td>
                        <td>User Experience and Interaction Design</td>
                        <td>Focuses on creating an MVP with user-centric design, ensuring ease of use, and facilitating quick user feedback. The approach to UI/UX design should be justified, emphasizing simplicity and functionality that meets user needs with minimal features.</td>
                        <td>
                            <div class="radio-group">
                                <div>
                                    <input type="radio" id="criteria3-1" name="criteria3" value="1">
                                    <label for="criteria3-1">1</label>
                                </div>
                                <div>
                                    <input type="radio" id="criteria3-2" name="criteria3" value="2">
                                    <label for="criteria3-2">2</label>
                                </div>
                                <div>
                                    <input type="radio" id="criteria3-3" name="criteria3" value="3">
                                    <label for="criteria3-3">3</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr><td colspan="4"><textarea class="form-control" name="comment3" id="comment3" placeholder="Remarks" rows="5"></textarea></td></tr>
                    <tr>
                        <td>4</td>
                        <td>Iterative Development Process and Feedback Loop</td>
                        <td>Reflects on the iterative development process of the MVP, including how user feedback was solicited, analyzed, and integrated into successive iterations. Highlights the adaptability of the development process and the ability to pivot based on insights gained from early adopters.</td>
                        <td>
                            <div class="radio-group">
                                <div>
                                    <input type="radio" id="criteria4-1" name="criteria4" value="1">
                                    <label for="criteria4-1">1</label>
                                </div>
                                <div>
                                    <input type="radio" id="criteria4-2" name="criteria4" value="2">
                                    <label for="criteria4-2">2</label>
                                </div>
                                <div>
                                    <input type="radio" id="criteria4-3" name="criteria4" value="3">
                                    <label for="criteria4-3">3</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr><td colspan="4"><textarea class="form-control" name="comment4" id="comment4" placeholder="Remarks" rows="5"></textarea></td></tr>
                    <tr>
                        <td>5</td>
                        <td>Technical Quality and Documentation</td>
                        <td>Evaluates the technical robustness and scalability potential of the MVP. Includes documentation, and the setup of a testing framework. Emphasizes the importance of a well-documented and maintainable technology stack that allows for easy updates and scaling based on user feedback and growing demands.</td>
                        <td>
                            <div class="radio-group">
                                <div>
                                    <input type="radio" id="criteria5-1" name="criteria5" value="1">
                                    <label for="criteria5-1">1</label>
                                </div>
                                <div>
                                    <input type="radio" id="criteria5-2" name="criteria5" value="2">
                                    <label for="criteria5-2">2</label>
                                </div>
                                <div>
                                    <input type="radio" id="criteria5-3" name="criteria5" value="3">
                                    <label for="criteria5-3">3</label>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr><td colspan="4"><textarea class="form-control" name="comment5" id="comment5" placeholder="Remarks" rows="5"></textarea></td></tr>
                </tbody>
            </table>
            <div class="mb-3">
                <label for="portfolioComplete" class="form-label">Portfolio complete</label>
                <input type="checkbox" id="portfolioComplete" name="portfolioComplete">
            </div>
            <div class="mb-3">
                <label for="apaStandards" class="form-label">Referencing according to APA standards</label>
                <input type="checkbox" id="apaStandards" name="apaStandards">
            </div>
            <div class="mb-3">
                <label for="githubLink" class="form-label">GitHub link provided</label>
                <input type="checkbox" id="githubLink" name="githubLink">
            </div>
            <div class="mb-3">
                <label for="remarks" class="form-label">General remarks</label>
                <textarea class="form-control" name="remarks" id="remarks" rows="5"></textarea>
            </div>
            <button type="button" class="btn btn-primary" onclick="calculateGrade()">Calculate Grade</button>
        </div>
        <button type="button" class="btn btn-success" onclick="downloadPDF()">Download as PDF</button>
    </form>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        const textareas = document.querySelectorAll('textarea');
        textareas.forEach(textarea => {
            textarea.addEventListener('input', autoResize);
            autoResize.call(textarea);
        });

        function autoResize() {
            this.style.height = 'auto';
            this.style.height = this.scrollHeight + 'px';
        }
    });

    function calculateGrade() {
        const weights = [0.2, 0.25, 0.25, 0.15, 0.15];
        const criteria = [1, 2, 3, 4, 5];
        let totalScore = 0;
        let knockout = false;

        let criteriaMet = 0;

        criteria.forEach((criterion, index) => {
            const radios = document.getElementsByName('criteria' + criterion);
            let selectedValue = 0;
            radios.forEach(radio => {
                if (radio.checked) {
                    selectedValue = parseInt(radio.value);
                }
            });
            if (selectedValue >= 2) {
                criteriaMet++;
            }
            totalScore += selectedValue * weights[index];
        });

        const portfolioComplete = document.getElementById('portfolioComplete').checked;
        const apaStandards = document.getElementById('apaStandards').checked;
        const githubLink = document.getElementById('githubLink').checked;

        if (criteriaMet < 4 || !portfolioComplete || !apaStandards || !githubLink) {
            knockout = true;
        }

        if (knockout) {
            finalGrade = 'KO';
            console.log(finalGrade)
        } else {
            const gradeMapping = {
                5: 4.0,
                6: 4.0,
                7: 4.0,
                8: 5.0,
                9: 6.0,
                10: 7.5,
                11: 8.0,
                12: 8.5,
                13: 9.0,
                14: 9.5,
                15: 10.0
            };
            finalGrade = gradeMapping[Math.round(totalScore * 5)] || 1;
        }

        document.getElementById('finalGrade').value = finalGrade;
    }

    function downloadPDF() {
        const textareas = document.querySelectorAll('textarea');
        textareas.forEach(textarea => {
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
        });
        const studentName = document.getElementById('studentName').value.toLowerCase();
        const element = document.getElementById('pdfContent');
        html2pdf(element, {
            margin: 0.2,
            filename: 'assessment-result-' + studentName + '.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2, logging: true, useCORS: true },
            jsPDF: { unit: 'in', format: 'A4', orientation: 'landscape' },
            pagebreak: { mode: ['avoid-all'] }
        });
    }
</script>
</body>
</html>
